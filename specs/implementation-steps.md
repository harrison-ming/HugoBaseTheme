# Hugo Theme Factory 实施步骤

本文档详细说明了 Hugo Theme Factory 基础主题的逐步实施计划，采用模块化方式组织，便于测试和迭代开发。

## 阶段概览

1. **基础结构设置**: 创建 Hugo Module 框架
2. **核心模板实现**: 实现基础页面模板和布局
3. **样式系统集成**: 集成 Tailwind CSS
4. **功能模块实现**: 添加核心功能组件
5. **自动化工具开发**: 完善脚本和自动化流程

## 详细实施步骤

### 阶段 1: 基础结构设置

**目标**: 创建 Hugo Module 基础框架，使主题可作为模块引用。

#### 步骤 1.1: 创建模块定义文件
- 创建 `go.mod` 文件，定义模块路径和依赖
- 创建 `theme.toml` 文件，定义主题元数据

#### 步骤 1.2: 建立基本文件夹结构
- 创建核心文件夹 (`layouts`, `assets`, `archetypes` 等)
- 创建 README.md 文件，说明主题用法

#### 步骤 1.3: 测试模块可用性
- 验证模块可被 Hugo 正确识别
- 测试基本 `hugo` 命令能否正常运行

### 阶段 2: 核心模板实现

**目标**: 创建基础页面模板和布局系统。

#### 步骤 2.1: 实现基础模板
- 创建 `layouts/_default/baseof.html` - 定义页面基础结构
- 创建 `layouts/_default/list.html` - 定义列表页面
- 创建 `layouts/_default/single.html` - 定义单文章页面
- 创建 `layouts/404.html` - 定义 404 页面

#### 步骤 2.2: 创建核心 Partials
- 创建 `layouts/partials/head.html` - 页面头部
- 创建 `layouts/partials/header.html` - 站点头部
- 创建 `layouts/partials/footer.html` - 站点底部
- 创建 `layouts/partials/navigation.html` - 导航菜单

#### 步骤 2.3: 测试基础布局
- 验证不同页面类型能否正确渲染
- 测试页面结构的响应式行为

### 阶段 3: 样式系统集成

**目标**: 集成 Tailwind CSS 作为样式框架。

#### 步骤 3.1: 安装 Tailwind CSS
- 设置 NPM 项目并安装 Tailwind 依赖
- 创建 Tailwind 配置文件
- 设置 PostCSS 处理流程

#### 步骤 3.2: 创建基础样式
- 创建主样式文件
- 定义颜色变量和主题配置
- 实现基础排版样式

#### 步骤 3.3: 测试样式系统
- 验证样式正确加载
- 测试响应式设计效果
- 确认 Tailwind 工具类可用

### 阶段 4: 功能模块实现

**目标**: 添加主题核心功能组件。

#### 步骤 4.1: SEO 组件
- 创建 `layouts/partials/seo/` 目录及组件
- 实现 Open Graph, Twitter Card 等元标签
- 添加结构化数据支持

#### 步骤 4.2: 分析与跟踪
- 创建 `layouts/partials/analytics.html`
- 支持 Google Analytics 4 
- 添加可配置的隐私选项

#### 步骤 4.3: 邮件订阅功能
- 创建通用订阅表单组件
- 实现服务商 API 集成接口
- 添加多种表单样式变体

#### 步骤 4.4: 法律页面模板
- 创建 `content/legal/` 目录下的标准法律页面
- 实现占位符替换机制
- 添加自动日期更新功能

#### 步骤 4.5: 测试功能模块
- 验证各组件独立功能
- 测试组件之间的交互
- 确认配置参数能正确影响行为

### 阶段 5: 自动化工具开发

**目标**: 完善脚本和自动化流程。

#### 步骤 5.1: 站点创建脚本
- 创建 `newsite.sh` 脚本
- 实现环境检查功能
- 添加模板替换和初始化功能

#### 步骤 5.2: 构建脚本
- 创建 `build.sh` 脚本
- 实现配置合并功能
- 添加构建优化选项

#### 步骤 5.3: 测试脚本功能
- 验证站点创建流程
- 测试构建过程
- 确认自动化工作流完整性

## 技术规范

### Tailwind CSS 集成
- 使用 PostCSS 和 PurgeCSS 进行优化
- 配置主题色彩系统和排版规则
- 自定义组件类以保持一致性

### 邮件订阅功能
- 支持主流服务商 API (Mailchimp, ConvertKit 等)
- 提供多种表单样式和位置选项
- 实现表单验证和错误处理

### 性能优化
- 图片懒加载实现
- 关键 CSS 内联
- 资源选择性加载机制

### 测试标准
- 每个功能模块应有明确测试方法
- 测试应涵盖功能、性能和兼容性
- 提供测试结果记录机制

## 注意事项

1. 每个模块应保持独立性，便于测试和维护
2. 文档应与代码同步更新
3. 遵循 Hugo 最佳实践和模块规范
4. 保持配置灵活性，允许子站点覆盖大部分设置
